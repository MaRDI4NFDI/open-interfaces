# `openInterfaces` Prototype Demonstrator

[![pre-commit.ci status](https://results.pre-commit.ci/badge/github/MaRDI4NFDI/open-interfaces/main.svg)](https://results.pre-commit.ci/latest/github/MaRDI4NFDI/open-interfaces/main)
[![build and test](https://github.com/MaRDI4NFDI/open-interfaces/actions/workflows/build.yml/badge.svg)](https://github.com/MaRDI4NFDI/open-interfaces/actions/workflows/build.yml)

## Setup

Only tested setup is based on the shipped `Dockerfile`.
That means debian bullseye with julia 1.7.

### Container based
#### CLion
Using this with CLion means setting up a new docker toolchain
with the base image from the `Dockerfile` and then selecting
that toolchain when CLion configures cmake.
[See also](https://www.jetbrains.com/help/clion/clion-toolchains-in-docker.html)

#### VSCode (not tested)
Should be a similar setup to CLion, using the "Docker Tools" extension.

### Local host setup

See the [container base image](https://zivgitlab.uni-muenster.de/ag-ohlberger/mardi/container/-/blob/main/m2-dev/Dockerfile)
for a list of necessary (debian) packages to install.

Then run
```shell
BUILDDIR=/some/path
mkdir ${BUILDDIR}
cd ${BUILDDIR}
cmake ..
cmake --build .
```

## Execution

If you want to run from the build dir
setting `LD_LIBRARY_PATH` is necessary.
```shell
cd ${BUILDDIR}
make
source oif.env # sets library path
# ./lang_*/main_* <language> <qouted expression>
./lang_c/main_c "python" "print(6*7)"
./lang_python/main_python.py "r" "print(6*7)"
```

## Documentation

Docs are generated by [sphinx](https://www.sphinx-doc.org/), which consumes [Doxygen](https://doxygen.nl/) XML via [exhale](https://exhale.readthedocs.io/)
and [breathe](https://breathe.readthedocs.io/).
Rendered HTML output for the main branch is available at
[https://mardi4nfdi.github.io/open-interfaces/](https://mardi4nfdi.github.io/open-interfaces/).
Currently only the `oif_connector/` subdir is used as input to doxygen, to avoid
exhale finding multiple definitions of functions.
